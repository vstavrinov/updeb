.\" Text automatically generated by txt2man
.TH updeb 1 "19 July 2015" "" ""
.SH NAME
\fBupdeb \fP- Upgrade Debian system non-interactively.
\fB
.SH SYNOPSIS
.nf
.fam C
\fBupdeb\fP [\fB-ursmdhvV\fP] [\fB-c\fP \fICONFIG\fP] [\fB-t\fP \fIMAILTO\fP]

.fam T
.fi
.fam T
.fi
.SH DESCRIPTION
This script will upgrade running debian system and mail the result: what was upgraded, from what version to what and for what period of time. The actual upgrade will be done only if all index files will be successfully updated, all required packages will be successfully downloaded, and finally only if the simulating of upgrade will be finished without errors. All old configuration files are preserved and can be compared to new *.dpkg-dist files. If any error occur, this will be mailed to You. The auto roll back and health check features allows to get system in old state if upgrade or test fails. It is intended to be used as cron job. 
.SH OPTIONS
.TP
.B
\fB-u\fP
Upgrade debian system
.TP
.B
\fB-r\fP
Debian upgrade report to stdout only if system changed since last upgrade
.TP
.B
\fB-m\fP
Mail upgrade report
.TP
.B
\fB-s\fP
Update the list of packages versions (called "snapshot"). This is snapshot what current state of the system is compared to. Its time stamp is the start of the report period. Note: if this option supplied alone with \fB-u\fP (i.e. upgrade) the actual update of the snapshot will be done only if the option \fB-m\fP (mail to) is present too and the system changed, i.e. at least one package was upgraded, installed or removed. This is not true for stand alone option: i.e. \fBupdeb\fP \fB-s\fP will update snapshot in any way.
.TP
.B
\fB-S\fP
Show available snapshots in POINT in time.
.TP
.B
\fB-B\fP POINT
List what to do to roll back to POINT in time (see \fB-S\fP option for POINT).
.TP
.B
\fB-b\fP POINT
Roll back to POINT in time (see \fB-S\fP option for POINT).
.TP
.B
\fB-a\fP
Auto rollback if upgrade fails
.TP
.B
\fB-e\fP
Health check and auto rollback if it fails. You sould define test commands in healthcheck function.
.TP
.B
\fB-c\fP \fICONFIG\fP
Set the configuration file. Default /etc/\fBupdeb\fP/updebrc
.TP
.B
\fB-t\fP \fIMAILTO\fP
Recipient of upgrade report. Default root
.TP
.B
\fB-v\fP
Verbose mode. This imply the verbosity of log file only, but not report
.TP
.B
\fB-d\fP
Debug mode. Set the shell options: set \fB-x\fP \fB-v\fP. Donâ€™t use it in cron job
.TP
.B
\fB-h\fP
Help
.TP
.B
\fB-V\fP
Version and copyright
.SH EXAMPLE
Typically this script is running by cron daemon every night. You can add to crontab something like this:
.PP
.nf
.fam C
        30 1 * * * root updeb \-ums
.fam T
.fi
This will upgrade Your system every night at 01:30 and if system changed, update snapshot and send report to You.
.SH FILES
.TP
.B
/etc/\fBupdeb\fP/updebrc
Main configuration file setting shell variables for such thing as address, log file, verbosity, cache cleaning and upgrade mode. In turn it sources the file /etc/\fBupdeb\fP/updebrc.local, where You can redefine all of them, leaving main config untouched.
.TP
.B
/etc/\fBupdeb\fP/updebrc.local
Local configuration file, sourced by main config. Use it for custom setting, overriding ones from main config.
.SH SEE ALSO
\fBupdebrc\fP(5), \fBapt-get\fP(8), \fBdpkg\fP(8)
.SH AUTHORS
Vladimir Stavrinov <vstavrinov@gmail.com>
